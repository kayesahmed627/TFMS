<div class="view-container">
    <mat-card class="medium-form-card-container mat-elevation-z9">
      <mat-card-header>
        <mat-card-title>Create new Organizer</mat-card-title>
        <mat-card-subtitle>Fill up the form</mat-card-subtitle>     
        <span class="filler"></span>       
      </mat-card-header>

      <mat-card-content>
        <form [formGroup]="organizerForm" class="medium-form-container"  (ngSubmit)="save()">
           
            <mat-form-field class="f-w" >            
                <mat-label>Organizer Name</mat-label>
                <input matInput type="text" formControlName="organizerName" />
                <mat-error *ngIf="f['organizerName'].touched && f['organizerName'].hasError('required')">Organizer Name is <strong>required</strong></mat-error>               
              </mat-form-field>

              <mat-form-field class="f-w" >
                <mat-label>Organizer Email</mat-label>
                <input matInput type="text" formControlName="organizerEmail" />
                <mat-error *ngIf="f['organizerEmail'].touched && f['organizerEmail'].hasError('required')">Organizer Email  is <strong>required</strong></mat-error>             
              </mat-form-field>

              <mat-form-field class="f-w" >
                <mat-label>Organizer Phone</mat-label>
                <input matInput type="text" formControlName="organizerPhone" />
                <mat-error *ngIf="f['organizerPhone'].touched && f['organizerPhone'].hasError('required')">Organizer Phone is <strong>required</strong></mat-error>              
              </mat-form-field>

              <mat-form-field class="f-w" >
                <mat-label>Website Url</mat-label>
                <input matInput type="text" formControlName="webSiteUrl" />
                <mat-error *ngIf="f['webSiteUrl'].touched && f['webSiteUrl'].hasError('required')">Website Url is <strong>required</strong></mat-error>              
              </mat-form-field>

              <mat-form-field class="f-w" >
                <mat-label>Sort Description</mat-label>
                <input matInput type="text" formControlName="sortDescription" />
                <mat-error *ngIf="f['sortDescription'].touched && f['sortDescription'].hasError('required')">Sort Description is <strong>required</strong></mat-error>              
              </mat-form-field>

              <div style="display: flex; justify-content: flex-end;">
                <button type="button" mat-icon-button (click)="addFair()" ><mat-icon>add</mat-icon></button>
              </div>

              <ng-container formArrayName="fairs">
                <ng-container *ngFor="let p of fairs.controls; let i = index">
                    <div [formGroupName]="i" class="fair-row">

                        <mat-form-field class="f-w" >
                            <mat-label>Fair Name </mat-label>
                            <input matInput
                                   formControlName="fairName">
                            <mat-error *ngIf="fairs.controls[i].get('fairName')?.hasError('required')">Property value is <strong>required</strong></mat-error>
                          </mat-form-field>

                          <mat-form-field class="f-w" >
                            <mat-label>Start Date</mat-label>
                            <input matInput formControlName="startDate" [matDatepicker]="picker">
                            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                            <mat-error *ngIf="fairs.controls[i].get('startDate')?.hasError('required')">Start Date is
                              <strong>required</strong></mat-error>
                          </mat-form-field>


                          <mat-form-field class="f-w" >
                            <mat-label>End Date </mat-label>
                            <input matInput
                                   formControlName="endDate">
                            <mat-error *ngIf="fairs.controls[i].get('endDate')?.hasError('required')">Size is <strong>required</strong></mat-error>
                          </mat-form-field>


                          <!-- <mat-form-field class="f-w" >
                            <mat-label>End Date</mat-label>
                            <input matInput formControlName="endDate" [matDatepicker]="picker">
                            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                            <mat-error *ngIf="fairs.controls[i].get('endDate')?.hasError('required')">End Date is
                              <strong>required</strong></mat-error>
                          </mat-form-field> -->


                          <mat-form-field class="f-w" >
                            <mat-label>Location </mat-label>
                            <input matInput
                                   formControlName="location">
                            <mat-error *ngIf="fairs.controls[i].get('location')?.hasError('required')">Size is <strong>required</strong></mat-error>
                          </mat-form-field>

                        

                          <mat-form-field class="f-w" >
                            <mat-label>Reg.DeadLine </mat-label>
                            <input matInput
                                   formControlName="registrationDeadLine">
                            <mat-error *ngIf="fairs.controls[i].get('registrationDeadLine')?.hasError('required')">Size is <strong>required</strong></mat-error>
                          </mat-form-field>

                          <!-- <mat-form-field class="f-w" >
                            <mat-label>Reg. DeadLine</mat-label>
                            <input matInput formControlName="registrationDeadLine" [matDatepicker]="picker">
                            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                            <mat-error *ngIf="fairs.controls[i].get('registrationDeadLine')?.hasError('required')">Reg. DeadLine is
                              <strong>required</strong></mat-error>
                          </mat-form-field> -->
                          <button mat-icon-button style="margin-bottom: 12px;" (click)="removeFair(i)"><mat-icon>delete</mat-icon></button>
                    </div>
                </ng-container>
            </ng-container>
            
            <div class="f-w">
              <button type="submit" [disabled]="organizerForm.invalid" mat-raised-button color="primary">Save</button>
            </div>

        </form>
        </mat-card-content>
        <mat-card-actions>
          <a mat-button [routerLink]="['/organizers']">Back to list</a>
        </mat-card-actions>
    </mat-card>
    

</div>  
